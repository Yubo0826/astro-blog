---
heroImage: /src/assets/images/banner.jpg
category: Javascript
description: Session-based Authentication å’Œ Token-based Authentication è©³ç´°çš„æ¯”è¼ƒ
pubDate: 2025-02-16T16:00:00.000Z
tags:
  - Authentication
  - Security
  - Web
title: èªè­‰æ©Ÿåˆ¶ï¼šSession-based vs Token-based
---

Session-based Authentication å’Œ Token-based Authentication æ˜¯å…©ç¨®ä¸åŒçš„èº«ä»½é©—è­‰æ–¹å¼ï¼Œå„æœ‰å„ªç¼ºé»ï¼Œé©ç”¨æ–¼ä¸åŒçš„æ‡‰ç”¨å ´æ™¯ã€‚ä»¥ä¸‹æ˜¯è©³ç´°çš„æ¯”è¼ƒï¼š

---

## Session-based Authenticationï¼ˆåŸºæ–¼ Session çš„èº«ä»½é©—è­‰ï¼‰

> ç™»å…¥è³‡è¨Šå­˜æ”¾å¾Œç«¯

### æ©Ÿåˆ¶

- ä½¿ç”¨è€…ç™»å…¥æ™‚ï¼Œå¾Œç«¯ç”¢ç”Ÿ Session ä¸¦å­˜å…¥ä¼ºæœå™¨çš„è¨˜æ†¶é«”æˆ–è³‡æ–™åº«ã€‚
- ä¼ºæœå™¨å›å‚³ Session IDï¼ˆé€šå¸¸å­˜æ–¼ HttpOnly Cookieï¼‰ã€‚
- å¾ŒçºŒè«‹æ±‚æ™‚ï¼Œç€è¦½å™¨è‡ªå‹•å¸¶ä¸Š Session IDï¼Œå¾Œç«¯æ¯”å°ç¢ºèªèº«ä»½ã€‚

### æµç¨‹

1. ä½¿ç”¨è€…ç™»å…¥ â†’ ä¼ºæœå™¨é©—è­‰å¸³è™Ÿå¯†ç¢¼ â†’ ç”Ÿæˆ Session ID å­˜å…¥ä¼ºæœå™¨ã€‚
2. ä¼ºæœå™¨é€é Set-Cookie å›æ‡‰ Session IDï¼ˆå­˜æ–¼ HttpOnly Cookieï¼‰ã€‚
3. ç€è¦½å™¨è«‹æ±‚æ™‚è‡ªå‹•å¸¶ä¸Š Session IDï¼Œå¾Œç«¯æ¯”å° Session ID ä¾†ç¢ºä¿èº«ä»½ã€‚
4. ç™»å‡ºæ™‚ï¼Œå¾Œç«¯åˆªé™¤ Sessionï¼Œæˆ–ç­‰ Session éæœŸã€‚

## Token-based Authenticationï¼ˆåŸºæ–¼ Token çš„èº«ä»½é©—è­‰ï¼‰

> ç™»å…¥è³‡è¨Šå­˜æ”¾å‰ç«¯

### æ©Ÿåˆ¶

- ä½¿ç”¨è€…ç™»å…¥æ™‚ï¼Œå¾Œç«¯ç”¢ç”Ÿ JWTï¼ˆJSON Web Tokenï¼‰ï¼Œä¸¦å›å‚³çµ¦å‰ç«¯ã€‚
- å‰ç«¯è‡ªè¡Œæ±ºå®šæ”¾åœ¨å“ªè£¡ï¼ˆCookieã€localstorafeã€æ¡†æ¶ç‹€æ…‹ç®¡ç†ç­‰ï¼‰ã€‚
- æ¯æ¬¡è«‹æ±‚æ™‚ï¼Œå‰ç«¯å°‡ accessToken æ”¾å…¥ Authorization: Bearer \<token>ï¼Œå¾Œç«¯é©—è­‰ JWTã€‚

### æµç¨‹

1. ä½¿ç”¨è€…ç™»å…¥ â†’ ä¼ºæœå™¨é©—è­‰å¸³å¯† â†’ ç”Ÿæˆ JWT accessToken & refreshTokenã€‚
2. å›å‚³ accessTokençµ¦å‰ç«¯ã€‚
3. å¾ŒçºŒè«‹æ±‚æ™‚ï¼Œå‰ç«¯åŠ ä¸Š Authorization: Bearer \<accessToken>ã€‚
4. Token éæœŸæ™‚ï¼Œå‰ç«¯ä½¿ç”¨ refreshToken å–å¾—æ–° Tokenã€‚
5. ç™»å‡ºæ™‚ï¼Œæ¸…é™¤ Tokenï¼Œæˆ–ç­‰å¾… Token éæœŸã€‚

### ç‰¹é»

- ç„¡ç‹€æ…‹ï¼ˆStatelessï¼‰ï¼šç™»å…¥è³‡è¨Šä¸éœ€è¦å­˜æ”¾æ–¼ä¼ºæœå™¨ï¼Œæ¸›å°‘ä¼ºæœå™¨è² æ“”ã€‚
- å¯ä»¥ä½¿ç”¨æ–¼ Web ä»¥å¤–çš„æ‡‰ç”¨ï¼šä¸å— Cookie é™åˆ¶ã€‚
- æ˜“æ–¼æ©«å‘æ“´å±•ï¼ˆScalingï¼‰ï¼šä¼ºæœå™¨ç„¡éœ€å­˜ Sessionï¼Œæ¯å°æ©Ÿå™¨éƒ½èƒ½é©—è­‰ Tokenã€‚
- è·¨åŸŸå‹å¥½ï¼šä¸åŒå‰ç«¯æ‡‰ç”¨ï¼ˆWeb / Mobile / API Gatewayï¼‰éƒ½èƒ½ä½¿ç”¨ç›¸åŒ Tokenã€‚

### è£œå……

> Token-based æ›´å®¹æ˜“èˆ‡ OAuth / Firebase æ•´åˆ

ç¾ä»£èº«ä»½é©—è­‰ï¼ˆå¦‚ Google ç™»å…¥ã€Facebook ç™»å…¥ã€Firebase Authï¼‰å¤§å¤šä½¿ç”¨ Token-basedï¼Œå› ç‚ºï¼š

- OAuth 2.0 é è¨­ä½¿ç”¨ accessToken å’Œ refreshTokenï¼Œèˆ‡ Token-based å®Œç¾å…¼å®¹ã€‚
- SPA é€šå¸¸æœƒèˆ‡ç¬¬ä¸‰æ–¹èº«ä»½é©—è­‰ï¼ˆå¦‚ Googleã€Facebookã€GitHubã€Microsoftï¼‰æ•´åˆï¼Œé€™äº›å¹³å°è¿”å›çš„ä¹Ÿæ˜¯ Tokenï¼Œè€Œé Sessionã€‚
- Firebase Authentication / AWS Cognito ç­‰é›²ç«¯èº«ä»½é©—è­‰æ–¹æ¡ˆï¼Œä¸»è¦ä½¿ç”¨ Token-basedã€‚

ğŸ‘‰ å¦‚æœä½ çš„æ‡‰ç”¨æœ‰ç¬¬ä¸‰æ–¹ç™»å…¥éœ€æ±‚ï¼ŒToken-based æœƒæ›´å®¹æ˜“æ•´åˆã€‚

---

## Session-based vs. Token-based

| æ¯”è¼ƒé …ç›®   | Session-based Authentication | Token-based Authentication            |
| ---------- | ---------------------------- | ------------------------------------- |
| å­˜å„²æ–¹å¼   | å¾Œç«¯å­˜ Session               | å‰ç«¯å­˜ accessToken                    |
| ä¼ºæœå™¨è² æ“” | è¼ƒé«˜ï¼ˆéœ€å­˜ Sessionï¼‰         | è¼ƒä½ï¼ˆStatelessï¼‰                     |
| é©ç”¨å ´æ™¯   | Web æ‡‰ç”¨                     | å‰å¾Œç«¯ä¸åŒæºä¹‹æ‡‰ç”¨ / Mobile App / API |
| è·¨åŸŸæ”¯æ´   | å—é™æ–¼ Cookie SameSite       | å®¹æ˜“ï¼ˆToken å­˜æ–¼ http æ¨™é ­å‚³éï¼‰      |
| ç™»å‡ºæ–¹å¼   | ä¼ºæœå™¨åˆªé™¤ Session           | åˆªé™¤ Tokenï¼Œæˆ–ç­‰å¾… Token éæœŸ         |
| å¯æ“´å±•æ€§   | è¼ƒä½ï¼ˆéœ€å…±äº« Sessionï¼‰       | è¼ƒé«˜ï¼ˆä»»æ„ä¼ºæœå™¨å¯é©—è­‰ Tokenï¼‰        |
| XSS é¢¨éšª   | ä½ï¼ˆSession å­˜ä¼ºæœå™¨ï¼‰       | é«˜ï¼ˆå¦‚æœ Token å­˜æ–¼ localStorageï¼‰    |
| CSRF é¢¨éšª  | é«˜ï¼ˆä½¿ç”¨ Cookieï¼‰            | ä½ï¼ˆä½¿ç”¨ Authorization æ¨™é ­ï¼‰         |

---

## å¤–éƒ¨è³‡æ–™

1. [å¾Œç«¯å¦‚ä½•ç›¸ä¿¡ accessToken](https://kucw.io/blog/jwt-signature/)
2. [Session å’Œ JWT çš„å·®åˆ¥åœ¨å“ªè£¡ï¼Ÿ](https://kucw.io/blog/session-vs-jwt/)
3. [JWT(JSON Web Token) â€” åŸç†ä»‹ç´¹](https://medium.com/%E4%BC%81%E9%B5%9D%E4%B9%9F%E6%87%82%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/jwt-json-web-token-%E5%8E%9F%E7%90%86%E4%BB%8B%E7%B4%B9-74abfafad7ba)
4. [ä»€éº¼æ˜¯JWTï¼Ÿèªè­˜ JSON Web Token èªè­‰æ©Ÿåˆ¶](https://tw.alphacamp.co/blog/jwt-json-web-token)
